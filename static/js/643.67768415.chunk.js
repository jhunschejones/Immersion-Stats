"use strict";(self.webpackChunkimmersion_stats=self.webpackChunkimmersion_stats||[]).push([[643],{1643:function(t,n,e){e.r(n),e.d(n,{datasetToPaddedArray:function(){return F},default:function(){return B},standardizedCsvToDataset:function(){return L}});var a=e(9439),r=e(1413),o=e(3644),i=e(1752),u=e(3077),d=e(2791),s=e(1087),c=e(7221),l=e(4442),f=function(t,n){for(var e=new Date(t.getTime()),a=[];e<=n;)a.push(new Date(e)),e.setDate(e.getDate()+1);return a},p=new Date((new Date).setDate((new Date).getDate()-10)),m=new Date((new Date).setMonth((new Date).getMonth()-1)),b=new Date((new Date).setMonth((new Date).getMonth()-3)),g=new Date((new Date).setFullYear((new Date).getFullYear()-1)),h=f(p,new Date),v=f(m,new Date),w=f(b,new Date),D=f(g,new Date),x=e(5653),y=e(7387),C=e(1526),k=e(8995),S=e(6886),j=function(){var t=(0,d.useState)(void 0),n=(0,a.Z)(t,2),e=n[0],r=n[1];return(0,S.y1)("1",(function(){return r((function(t){return 0==t?void 0:0}))}),[]),(0,S.y1)("2",(function(){return r((function(t){return 1==t?void 0:1}))}),[]),(0,S.y1)("3",(function(){return r((function(t){return 2==t?void 0:2}))}),[]),(0,S.y1)("4",(function(){return r((function(t){return 3==t?void 0:3}))}),[]),(0,S.y1)("5",(function(){return r((function(t){return 4==t?void 0:4}))}),[]),(0,S.y1)("backspace",(function(){return r(void 0)}),[]),{datasetIndex:e}},I=e(184);o.kL.register(o.uw,o.f$,o.od,o.jn,o.u,o.De,i.Z);var M=["10D","1M","3M","1Y"],T=function(t){return"1M"==t?v:"3M"==t?w:"1Y"==t?D:h},Z={};M.forEach((function(t){Z[t]=T(t).map((function(t){return t.toLocaleDateString("en-US",{month:"numeric",day:"numeric",weekday:"short"})}))}));var F=function(t,n){var e=Array(t).flat();return("string"==typeof n?T(n):n).map((function(t){var n=t.toISOString().split("T")[0],a=e.map((function(t){return t[n]})).filter((function(t){return void 0!=t}));return a.length>0?{date:t,minutesStudied:a.map((function(t){return t.minutesStudied})).reduce((function(t,n){return t+n}),0)}:{date:t,minutesStudied:0}}))},L=function(t){var n={};return(0,l.c)(t).forEach((function(t){var e=new Date(t.Date),a=e.toISOString().split("T")[0];if(n[a]){var r=n[a].minutesStudied;n[a]={date:e,minutesStudied:parseFloat(t["Time (mins)"])+r}}else n[a]={date:e,minutesStudied:parseFloat(t["Time (mins)"])}})),n},O=function(t,n){if(t)try{var e=t.chart.data.datasets.at(n).data;return e.reduce((function(t,n){return t+n}),0)/e.length}catch(a){return}},A={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},annotation:{animation:!1,annotations:{averageTotal:{display:!1}}}},scales:{y:{title:{display:!0,text:"Study minutes"}}}},Y=function(t){return(0,r.Z)((0,r.Z)({},A),{},{plugins:(0,r.Z)((0,r.Z)({},A.plugins),{},{annotation:(0,r.Z)((0,r.Z)({},A.plugins.annotation),{},{annotations:(0,r.Z)((0,r.Z)({},A.plugins.annotation.annotations),{},{averageTotal:{type:"line",scaleID:"y",value:function(n){var e;return null!==(e=O(n,t))&&void 0!==e?e:0},display:function(n){return!n.chart.legend.legendItems.at(t).hidden},label:{display:!0,content:function(n){var e;return"Avg: ".concat(null===(e=O(n,t))||void 0===e?void 0:e.toFixed(0)," mins/day")},backgroundColor:function(n){return n.chart.data.datasets.at(t).borderColor},color:function(n){return"#e5e5e5"==n.chart.data.datasets.at(t).borderColor?"#777":"#FFF"},backgroundShadowColor:"#b7b7b7",shadowOffsetX:3,shadowOffsetY:3,shadowBlur:4},borderColor:function(n){return n.chart.data.datasets.at(t).borderColor},borderDash:[6,6],borderWidth:3,drawTime:"afterDraw",shadowOffsetX:3,shadowOffsetY:3,shadowBlur:4,borderShadowColor:"#b7b7b7"}})})})})};function B(){var t=(0,d.useContext)(x.u),n=t.jpdbData,e=t.jpdbIsLoading,r=(0,d.useContext)(y.F),o=r.bunproData,i=r.bunproIsLoading,l=(0,d.useContext)(C.b),f=l.ankiData,p=l.ankiDataIsLoading,m=(0,d.useContext)(k.o),b=m.immersionData,g=m.immersionIsLoading,h=(0,s.lr)(),v=(0,a.Z)(h,2),w=v[0],D=v[1],S=(0,d.useMemo)((function(){var t,n=null===(t=(0,c.Q)().get("dateRange"))||void 0===t?void 0:t.trim();return n&&M.includes(n)?n:M[0]}),[w]),T=j().datasetIndex,O=(0,d.useMemo)((function(){return void 0==T?A:Y(T)}),[T]),B=(0,d.useMemo)((function(){return e||i||p||g||[n,o,f,b].includes(void 0)?{}:{jpdb:L(n),bunpro:L(o),anki:L(f),immersion:L(b)}}),[e,n,i,o,p,f,g,b]),R=(0,d.useMemo)((function(){return 0==Object.keys(B).length?{}:{labels:Z[S],datasets:[{label:"jpdb.io",data:F(B.jpdb,S).map((function(t){return t.minutesStudied})),borderColor:"#5dcc06",backgroundColor:"#5dcc06"},{label:"Bunpro",data:F(B.bunpro,S).map((function(t){return t.minutesStudied})),borderColor:"#ff9600",backgroundColor:"#ff9600"},{label:"Anki",data:F(B.anki,S).map((function(t){return t.minutesStudied})),borderColor:"#235390",backgroundColor:"#235390"},{label:"Immersion",data:F(B.immersion,S).map((function(t){return t.minutesStudied})),borderColor:"#cc348d",backgroundColor:"#cc348d"},{label:"Total",data:F([B.jpdb,B.bunpro,B.anki,B.immersion],S).map((function(t){return t.minutesStudied})),borderColor:"#e5e5e5",backgroundColor:"#e5e5e5"}]}}),[B,S]);return(0,I.jsxs)("div",{style:{maxHeight:"calc(100vh - 220px)",padding:"0 12px 12px 12px",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,I.jsx)("h1",{style:{margin:"4px 0 18px 0",padding:"0",fontSize:"28px",fontWeight:"600"},children:"Study Trends"}),(0,I.jsx)("div",{style:{display:"flex",marginBottom:"12px"},children:M.map((function(t,n){var e={backgroundColor:"#1baff6",borderColor:"#1a99d6",margin:"0 2px",padding:"5px 10px 3px 10px"};return S===t&&(e.backgroundColor="#ce82ff",e.borderColor="#a567cc"),(0,I.jsx)("button",{className:"button",style:e,onClick:function(){return D({dateRange:t})},children:t},n)}))}),null!==R&&void 0!==R&&R.datasets?(0,I.jsx)(u.x1,{options:O,data:R}):(0,I.jsx)("p",{style:{textAlign:"center"},children:"Loading..."})]})}},7221:function(t,n,e){e.d(n,{Q:function(){return a}});var a=function(){var t=window.location.toString().replace("/#/","/").replace("".concat(window.location.pathname,"#/"),"".concat(window.location.pathname,"/"));return new URL(t).searchParams}}}]);
//# sourceMappingURL=643.67768415.chunk.js.map