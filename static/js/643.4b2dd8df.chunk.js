"use strict";(self.webpackChunkimmersion_stats=self.webpackChunkimmersion_stats||[]).push([[643],{1643:function(t,n,e){e.r(n),e.d(n,{datasetToPaddedArray:function(){return R},default:function(){return U},standardizedCsvToDataset:function(){return z}});var a=e(9439),r=e(1413),o=e(3644),i=e(1752),u=e(3077),d=e(2791),s=e(1087),c=e(7221),l=e(4442),f=function(t,n){for(var e=new Date(t.getTime()),a=[];e<=n;)a.push(new Date(e)),e.setDate(e.getDate()+1);return a},p=new Date((new Date).setDate((new Date).getDate()-10)),m=new Date((new Date).setMonth((new Date).getMonth()-1)),b=new Date((new Date).setMonth((new Date).getMonth()-3)),g=new Date((new Date).setFullYear((new Date).getFullYear()-1)),w=new Date((new Date).setFullYear((new Date).getFullYear()-2)),D=new Date((new Date).setFullYear((new Date).getFullYear()-3)),h=f(p,new Date),v=f(m,new Date),x=f(b,new Date),y=f(g,new Date),C=f(w,new Date),k=f(D,new Date),S=e(5653),Y=e(7387),j=e(1526),F=e(8995),I=e(6886),M=function(){var t=(0,d.useState)(void 0),n=(0,a.Z)(t,2),e=n[0],r=n[1];return(0,I.y1)("1",(function(){return r((function(t){return 0==t?void 0:0}))}),[]),(0,I.y1)("2",(function(){return r((function(t){return 1==t?void 0:1}))}),[]),(0,I.y1)("3",(function(){return r((function(t){return 2==t?void 0:2}))}),[]),(0,I.y1)("4",(function(){return r((function(t){return 3==t?void 0:3}))}),[]),(0,I.y1)("5",(function(){return r((function(t){return 4==t?void 0:4}))}),[]),(0,I.y1)("backspace",(function(){return r(void 0)}),[]),{datasetIndex:e}},T=e(184);o.kL.register(o.uw,o.f$,o.od,o.jn,o.u,o.De,i.Z);var Z=["10D","1M","3M","1Y","2Y","3Y"],L=["2Y","3Y"],O=Z.filter((function(t){return!L.includes(t)})),A=function(t){return"1M"==t?v:"3M"==t?x:"1Y"==t?y:"2Y"==t?C:"3Y"==t?k:h},B={};Z.forEach((function(t){B[t]=A(t).map((function(t){return t.toLocaleDateString("en-US",{month:"numeric",day:"numeric",weekday:"short"})}))}));var R=function(t,n){var e=Array(t).flat();return("string"==typeof n?A(n):n).map((function(t){var n=t.toISOString().split("T")[0],a=e.map((function(t){return t[n]})).filter((function(t){return void 0!=t}));return a.length>0?{date:t,minutesStudied:a.map((function(t){return t.minutesStudied})).reduce((function(t,n){return t+n}),0)}:{date:t,minutesStudied:0}}))},z=function(t){var n={};return(0,l.c)(t).forEach((function(t){var e=new Date(t.Date),a=e.toISOString().split("T")[0];if(n[a]){var r=n[a].minutesStudied;n[a]={date:e,minutesStudied:parseFloat(t["Time (mins)"])+r}}else n[a]={date:e,minutesStudied:parseFloat(t["Time (mins)"])}})),n},E=function(t,n){if(t)try{var e=t.chart.data.datasets.at(n).data;return e.reduce((function(t,n){return t+n}),0)/e.length}catch(a){return}},P={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},annotation:{animation:!1,annotations:{averageTotal:{display:!1}}}},scales:{y:{title:{display:!0,text:"Study minutes"}}}},Q=function(t){return(0,r.Z)((0,r.Z)({},P),{},{plugins:(0,r.Z)((0,r.Z)({},P.plugins),{},{annotation:(0,r.Z)((0,r.Z)({},P.plugins.annotation),{},{annotations:(0,r.Z)((0,r.Z)({},P.plugins.annotation.annotations),{},{averageTotal:{type:"line",scaleID:"y",value:function(n){var e;return null!==(e=E(n,t))&&void 0!==e?e:0},display:function(n){return!n.chart.legend.legendItems.at(t).hidden},label:{display:!0,content:function(n){var e;return"Avg: ".concat(null===(e=E(n,t))||void 0===e?void 0:e.toFixed(0)," mins/day")},backgroundColor:function(n){return n.chart.data.datasets.at(t).borderColor},color:function(n){return"#e5e5e5"==n.chart.data.datasets.at(t).borderColor?"#777":"#FFF"},backgroundShadowColor:"#b7b7b7",shadowOffsetX:3,shadowOffsetY:3,shadowBlur:4},borderColor:function(n){return n.chart.data.datasets.at(t).borderColor},borderDash:[6,6],borderWidth:3,drawTime:"afterDraw",shadowOffsetX:3,shadowOffsetY:3,shadowBlur:4,borderShadowColor:"#b7b7b7"}})})})})};function U(){var t=(0,d.useContext)(S.u),n=t.jpdbData,e=t.jpdbIsLoading,r=(0,d.useContext)(Y.F),o=r.bunproData,i=r.bunproIsLoading,l=(0,d.useContext)(j.b),f=l.ankiData,p=l.ankiDataIsLoading,m=(0,d.useContext)(F.o),b=m.immersionData,g=m.immersionIsLoading,w=(0,s.lr)(),D=(0,a.Z)(w,2),h=D[0],v=D[1],x=(0,d.useMemo)((function(){var t,n=null===(t=(0,c.Q)().get("dateRange"))||void 0===t?void 0:t.trim();return n&&Z.includes(n)?n:Z[0]}),[h]),y=M().datasetIndex,C=(0,d.useMemo)((function(){return void 0==y?P:Q(y)}),[y]),k=(0,d.useMemo)((function(){return e||i||p||g||[n,o,f,b].includes(void 0)?{}:{jpdb:z(n),bunpro:z(o),anki:z(f),immersion:z(b)}}),[e,n,i,o,p,f,g,b]),I=(0,d.useMemo)((function(){return 0==Object.keys(k).length?{}:{labels:B[x],datasets:[{label:"jpdb.io",data:R(k.jpdb,x).map((function(t){return t.minutesStudied})),borderColor:"#5dcc06",backgroundColor:"#5dcc06"},{label:"Bunpro",data:R(k.bunpro,x).map((function(t){return t.minutesStudied})),borderColor:"#ff9600",backgroundColor:"#ff9600"},{label:"Anki",data:R(k.anki,x).map((function(t){return t.minutesStudied})),borderColor:"#235390",backgroundColor:"#235390"},{label:"Immersion",data:R(k.immersion,x).map((function(t){return t.minutesStudied})),borderColor:"#cc348d",backgroundColor:"#cc348d"},{label:"Total",data:R([k.jpdb,k.bunpro,k.anki,k.immersion],x).map((function(t){return t.minutesStudied})),borderColor:"#e5e5e5",backgroundColor:"#e5e5e5"}]}}),[k,x]);return(0,T.jsxs)("div",{style:{maxHeight:"calc(100vh - 220px)",padding:"0 12px 12px 12px",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,T.jsx)("h1",{style:{margin:"4px 0 18px 0",padding:"0",fontSize:"28px",fontWeight:"600"},children:"Study Trends"}),(0,T.jsx)("div",{style:{display:"flex",marginBottom:"12px"},children:O.map((function(t,n){var e={backgroundColor:"#1baff6",borderColor:"#1a99d6",margin:"0 2px",padding:"5px 10px 3px 10px"};return x===t&&(e.backgroundColor="#ce82ff",e.borderColor="#a567cc"),(0,T.jsx)("button",{className:"button",style:e,onClick:function(){return v({dateRange:t})},children:t},n)}))}),null!==I&&void 0!==I&&I.datasets?(0,T.jsx)(u.x1,{options:C,data:I}):(0,T.jsx)("p",{style:{textAlign:"center"},children:"Loading..."})]})}},7221:function(t,n,e){e.d(n,{Q:function(){return a}});var a=function(){var t=window.location.toString().replace("/#/","/").replace("".concat(window.location.pathname,"#/"),"".concat(window.location.pathname,"/"));return new URL(t).searchParams}}}]);
//# sourceMappingURL=643.4b2dd8df.chunk.js.map