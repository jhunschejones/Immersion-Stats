"use strict";(self.webpackChunkimmersion_stats=self.webpackChunkimmersion_stats||[]).push([[112],{112:(e,t,a)=>{a.r(t),a.d(t,{datasetToPaddedArray:()=>B,default:()=>W,standardizedCsvToDataset:()=>N});var n=a(6361),o=a(119),r=a(6058),d=a(5043),s=a(5475),i=a(6386),l=a(5078);const u=(e,t)=>{const a=new Date(e.getTime()),n=[];for(;a<=t;)n.push(new Date(a)),a.setDate(a.getDate()+1);return n},c=new Date((new Date).setDate((new Date).getDate()-10)),p=new Date((new Date).setMonth((new Date).getMonth()-1)),m=new Date((new Date).setMonth((new Date).getMonth()-3)),b=new Date((new Date).setFullYear((new Date).getFullYear()-1)),g=new Date((new Date).setFullYear((new Date).getFullYear()-2)),w=new Date((new Date).setFullYear((new Date).getFullYear()-3)),h=u(c,new Date),D=u(p,new Date),v=u(m,new Date),f=u(b,new Date),C=u(g,new Date),x=u(w,new Date);var k=a(9772),y=a(2868),S=a(1551),Y=a(4655),j=a(588);const F=()=>{const[e,t]=(0,d.useState)(void 0);return(0,j.vC)("1",(()=>t((e=>0==e?void 0:0))),[]),(0,j.vC)("2",(()=>t((e=>1==e?void 0:1))),[]),(0,j.vC)("3",(()=>t((e=>2==e?void 0:2))),[]),(0,j.vC)("4",(()=>t((e=>3==e?void 0:3))),[]),(0,j.vC)("5",(()=>t((e=>4==e?void 0:4))),[]),(0,j.vC)("backspace",(()=>t(void 0)),[]),{datasetIndex:e}};var I=a(579);n.t1.register(n.PP,n.kc,n.FN,n.No,n.m_,n.s$,o.A);const M=["10D","1M","3M","1Y","2Y","3Y"],T=["2Y","3Y"],A=M.filter((e=>!T.includes(e))),L=e=>"1M"==e?D:"3M"==e?v:"1Y"==e?f:"2Y"==e?C:"3Y"==e?x:h,O={};M.forEach((e=>{O[e]=L(e).map((e=>e.toLocaleDateString("en-US",{month:"numeric",day:"numeric",weekday:"short"})))}));const B=(e,t)=>{const a=Array(e).flat();return("string"==typeof t?L(t):t).map((e=>{const t=e.toISOString().split("T")[0],n=a.map((e=>e[t])).filter((e=>void 0!=e));return n.length>0?{date:e,minutesStudied:n.map((e=>e.minutesStudied)).reduce(((e,t)=>e+t),0)}:{date:e,minutesStudied:0}}))},N=e=>{const t={};return(0,l.W)(e).forEach((e=>{const a=new Date(e.Date),n=a.toISOString().split("T")[0];if(t[n]){const o=t[n].minutesStudied;t[n]={date:a,minutesStudied:parseFloat(e["Time (mins)"])+o}}else t[n]={date:a,minutesStudied:parseFloat(e["Time (mins)"])}})),t},P=(e,t)=>{if(e)try{const a=e.chart.data.datasets.at(t).data;return a.reduce(((e,t)=>e+t),0)/a.length}catch(a){return}},R={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},annotation:{animation:!1,annotations:{averageTotal:{display:!1}}}},scales:{y:{title:{display:!0,text:"Study minutes"}}}},$=e=>({...R,plugins:{...R.plugins,annotation:{...R.plugins.annotation,annotations:{...R.plugins.annotation.annotations,averageTotal:{type:"line",scaleID:"y",value:t=>{var a;return null!==(a=P(t,e))&&void 0!==a?a:0},display:t=>!t.chart.legend.legendItems.at(e).hidden,label:{display:!0,content:t=>{var a;return`Avg: ${null===(a=P(t,e))||void 0===a?void 0:a.toFixed(0)} mins/day`},backgroundColor:t=>t.chart.data.datasets.at(e).borderColor,color:t=>"#e5e5e5"==t.chart.data.datasets.at(e).borderColor?"#777":"#FFF",backgroundShadowColor:"#b7b7b7",shadowOffsetX:3,shadowOffsetY:3,shadowBlur:4},borderColor:t=>t.chart.data.datasets.at(e).borderColor,borderDash:[6,6],borderWidth:3,drawTime:"afterDraw",shadowOffsetX:3,shadowOffsetY:3,shadowBlur:4,borderShadowColor:"#b7b7b7"}}}}});function W(){const{jpdbData:e,jpdbIsLoading:t}=(0,d.useContext)(k.q),{bunproData:a,bunproIsLoading:n}=(0,d.useContext)(y.o),{ankiData:o,ankiDataIsLoading:l}=(0,d.useContext)(S.b),{immersionData:u,immersionIsLoading:c}=(0,d.useContext)(Y.v),[p,m]=(0,s.ok)(),b=(0,d.useMemo)((()=>{var e;const t=null===(e=(0,i.j)().get("dateRange"))||void 0===e?void 0:e.trim();return t&&M.includes(t)?t:M[0]}),[p]),{datasetIndex:g}=F(),w=(0,d.useMemo)((()=>void 0==g?R:$(g)),[g]),h=(0,d.useMemo)((()=>t||n||l||c||[e,a,o,u].includes(void 0)?{}:{jpdb:N(e),bunpro:N(a),anki:N(o),immersion:N(u)}),[t,e,n,a,l,o,c,u]),D=(0,d.useMemo)((()=>0==Object.keys(h).length?{}:{labels:O[b],datasets:[{label:"jpdb.io",data:B(h.jpdb,b).map((e=>e.minutesStudied)),borderColor:"#5dcc06",backgroundColor:"#5dcc06"},{label:"Bunpro",data:B(h.bunpro,b).map((e=>e.minutesStudied)),borderColor:"#ff9600",backgroundColor:"#ff9600"},{label:"Anki",data:B(h.anki,b).map((e=>e.minutesStudied)),borderColor:"#235390",backgroundColor:"#235390"},{label:"Immersion",data:B(h.immersion,b).map((e=>e.minutesStudied)),borderColor:"#cc348d",backgroundColor:"#cc348d"},{label:"Total",data:B([h.jpdb,h.bunpro,h.anki,h.immersion],b).map((e=>e.minutesStudied)),borderColor:"#e5e5e5",backgroundColor:"#e5e5e5"}]}),[h,b]);return(0,I.jsxs)("div",{style:{maxHeight:"calc(100vh - 220px)",padding:"0 12px 12px 12px",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,I.jsx)("h1",{style:{margin:"4px 0 18px 0",padding:"0",fontSize:"28px",fontWeight:"600"},children:"Study Trends"}),(0,I.jsx)("div",{style:{display:"flex",marginBottom:"12px"},children:A.map(((e,t)=>{const a={backgroundColor:"#1baff6",borderColor:"#1a99d6",margin:"0 2px",padding:"5px 10px 3px 10px"};return b===e&&(a.backgroundColor="#ce82ff",a.borderColor="#a567cc"),(0,I.jsx)("button",{className:"button",style:a,onClick:()=>m({dateRange:e}),children:e},t)}))}),null!==D&&void 0!==D&&D.datasets?(0,I.jsx)(r.N1,{options:w,data:D}):(0,I.jsx)("p",{style:{textAlign:"center"},children:"Loading..."})]})}},6386:(e,t,a)=>{a.d(t,{j:()=>n});const n=()=>{const e=window.location.toString().replace("/#/","/").replace(`${window.location.pathname}#/`,`${window.location.pathname}/`);return new URL(e).searchParams}}}]);
//# sourceMappingURL=112.4e22fea1.chunk.js.map