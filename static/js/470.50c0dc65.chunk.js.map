{"version":3,"file":"static/js/470.50c0dc65.chunk.js","mappings":"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","sources":["components/ProgressRing.js","utils/strings.js","components/WeeklyProgress.js","utils/urls.js"],"sourcesContent":["// Borrowed from https://css-tricks.com/building-progress-ring-quickly/\nimport PropTypes from \"prop-types\";\n\nProgressRing.propTypes = {\n  radius: PropTypes.number,\n  stroke: PropTypes.number,\n  progress: PropTypes.number,\n  title: PropTypes.string,\n  progressText: PropTypes.string\n};\n\nexport default function ProgressRing ({radius, stroke, progress, title, progressText=null}) {\n  const adjustedProgress = progress > 100 ? 100 : progress;\n  const normalizedRadius = radius - stroke * 2;\n  const circumference = normalizedRadius * 2 * Math.PI;\n  const strokeDashoffset = circumference - adjustedProgress / 100 * circumference;\n  const titleOffsetPixels = 32;\n  const showFullCircle = adjustedProgress === 100;\n\n  return (\n    <div\n      className=\"progress-ring-container\"\n      style={{maxWidth: radius * 2, maxHeight: (radius * 2) + titleOffsetPixels}}\n    >\n      <h4 className=\"progress-title\">{title}</h4>\n      <div className=\"progress-ring\" data-testid=\"progress-ring\">\n        <svg\n          height={radius * 2}\n          width={radius * 2}\n        >\n          <circle\n            data-full={showFullCircle}\n            stroke={showFullCircle ? \"#5dcc06\" : \"#235390\"}\n            fill=\"transparent\"\n            strokeWidth={stroke}\n            strokeDasharray={circumference + \" \" + circumference}\n            style={{strokeDashoffset}}\n            r={normalizedRadius}\n            cx={radius}\n            cy={radius}\n          />\n        </svg>\n      </div>\n      <span className=\"progress-text\" data-testid=\"progress-text\">\n        {progressText ? progressText : `${progress}%`}\n      </span>\n    </div>\n  );\n}\n","export const titleCase = (string) => {\n  let splitStringArray = string.toLowerCase().split(\" \");\n  for (let i = 0; i < splitStringArray.length; i++) {\n    splitStringArray[i] = splitStringArray[i].charAt(0).toUpperCase() + splitStringArray[i].slice(1);\n  }\n  return splitStringArray.join(\" \");\n};\n","import { useState, useMemo, useEffect, useContext } from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\nimport ProgressRing from \"./ProgressRing\";\nimport { titleCase } from \"../utils/strings\";\nimport { getSearchParams } from \"../utils/urls\";\nimport { AggregatedImmersionContext } from \"../providers/AggregatedImmersionProvider\";\nimport useParsedCsv from \"../hooks/use-parsed-csv\";\n\nconst TIME_RANGES = [\n  {name: \"This week\", key: \"this-week\"},\n  {name: \"Last week\", key: \"last-week\"},\n  {name: \"Two weeks\", key: \"two-weeks\"},\n];\n\nexport default function WeeklyProgress () {\n  const { aggregatedImmersionData: data, aggregatedImmersionIsLoading: isLoading } = useContext(AggregatedImmersionContext);\n  const [windowDimensions, setWindowDimensions] = useState({\n    height: window.innerHeight,\n    width: window.innerWidth\n  });\n\n  const [searchParams, setSearchParams] = useSearchParams();\n  const selectedTimeRangeKey = useMemo(() => {\n    const urlTimeRange = getSearchParams().get(\"timeRange\")?.trim();\n    if (urlTimeRange && TIME_RANGES.map(t => t.key).includes(urlTimeRange)) return urlTimeRange;\n    return TIME_RANGES[0].key;\n  }, [searchParams]);\n\n  const parsedCsvData = useParsedCsv(isLoading, data);\n\n  const progressByTimeRangeKey = useMemo(() => {\n    const result = {};\n    TIME_RANGES.forEach((timeRange) => {\n      result[timeRange.key] = parsedCsvData.slice(0, 3).map((progressReport) => {\n        const progressNumber = (parseInt(progressReport[`${titleCase(timeRange.name)} (mins)`]) / parseInt(progressReport[\"Weekly Goals (mins)\"])) * 100;\n        return {\n          progress: progressNumber,\n          title: progressReport[\"Category\"],\n          progressText: progressReport[titleCase(timeRange.name)],\n        };\n      });\n    });\n    return result;\n  }, [parsedCsvData]);\n\n  useEffect(() => {\n    const handleResize = () => {\n      setWindowDimensions({\n        height: window.innerHeight,\n        width: window.innerWidth\n      });\n    };\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  if (isLoading) {\n    return <p className=\"loading-messsage\">Fetching csv file...</p>;\n  }\n\n  if (Object.keys(progressByTimeRangeKey).length === 0) {\n    return <p className=\"loading-messsage\">Processing data...</p>;\n  }\n\n  return (\n    <div className=\"WeeklyProgress\">\n      <h1 style={{\n        margin: \"4px 0 25px 0\",\n        padding: \"0\",\n        fontSize: \"28px\",\n        fontWeight: \"600\"\n      }}>\n        Weekly Progress\n      </h1>\n      <div className=\"time-range-button-container\">\n        {TIME_RANGES.map((timeRange, index) => {\n          let buttonClassName = \"button time-range-button\";\n          if (selectedTimeRangeKey === timeRange.key) {\n            buttonClassName += \" selected\";\n          }\n          return (\n            <button\n              key={index}\n              className={buttonClassName}\n              onClick={() => setSearchParams({timeRange: timeRange.key})}\n            >\n              {timeRange.name}\n            </button>\n          );\n        })}\n      </div>\n      <div style={{display: \"flex\", flexWrap: \"wrap\", justifyContent: \"center\"}}>\n        {progressByTimeRangeKey[selectedTimeRangeKey].map((progressReport, index) => {\n          return <ProgressRing\n            key={index}\n            stroke={8}\n            radius={windowDimensions.width > 419 ? 85 : 75}\n            progress={progressReport[\"progress\"]}\n            title={progressReport[\"title\"]}\n            progressText={progressReport[\"progressText\"]}\n          />;\n        })}\n      </div>\n    </div>\n  );\n}\n","/** the getter on react-dom's `useSearchParams` hook doesn't work with the hash\n * router, so use this function instead to read search params from the URL\n*/\nexport const getSearchParams = () => {\n  const cleanLocationString = window.location\n    .toString()\n    .replace(\"/#/\", \"/\")\n    .replace(`${window.location.pathname}#/`, `${window.location.pathname}/`);\n  return new URL(cleanLocationString).searchParams;\n};\n"],"names":["ProgressRing","_ref","radius","stroke","progress","title","progressText","adjustedProgress","normalizedRadius","circumference","Math","PI","strokeDashoffset","showFullCircle","_jsxs","className","style","maxWidth","maxHeight","children","_jsx","height","width","fill","strokeWidth","strokeDasharray","r","cx","cy","titleCase","string","splitStringArray","toLowerCase","split","i","length","charAt","toUpperCase","slice","join","TIME_RANGES","name","key","WeeklyProgress","aggregatedImmersionData","data","aggregatedImmersionIsLoading","isLoading","useContext","AggregatedImmersionContext","windowDimensions","setWindowDimensions","useState","window","innerHeight","innerWidth","searchParams","setSearchParams","useSearchParams","selectedTimeRangeKey","useMemo","_getSearchParams$get","urlTimeRange","getSearchParams","get","trim","map","t","includes","parsedCsvData","useParsedCsv","progressByTimeRangeKey","result","forEach","timeRange","progressReport","parseInt","useEffect","handleResize","addEventListener","removeEventListener","Object","keys","margin","padding","fontSize","fontWeight","index","buttonClassName","onClick","display","flexWrap","justifyContent","cleanLocationString","location","toString","replace","pathname","URL"],"sourceRoot":""}