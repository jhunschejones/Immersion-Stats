"use strict";(self.webpackChunkimmersion_stats=self.webpackChunkimmersion_stats||[]).push([[839],{7839:function(t,n,e){e.r(n),e.d(n,{datasetToPaddedArray:function(){return I},default:function(){return Y},getDatesBetween:function(){return v},standardizedCsvToDataset:function(){return F}});var a=e(9439),r=e(1413),o=e(3644),i=e(6601),u=e(3077),d=e(2791),s=e(1087),c=e(7221),l=e(4442),f=e(5653),p=e(7387),m=e(1526),b=e(8995),g=e(6886),h=e(184);o.kL.register(o.uw,o.f$,o.od,o.jn,o.u,o.De,i.Z);var v=function(t,n){for(var e=new Date(t.getTime()),a=[];e<=n;)a.push(new Date(e)),e.setDate(e.getDate()+1);return a},w=["10D","1M","3M","1Y"],D=new Date((new Date).setDate((new Date).getDate()-10)),x=new Date((new Date).setMonth((new Date).getMonth()-1)),y=new Date((new Date).setMonth((new Date).getMonth()-3)),C=new Date((new Date).setFullYear((new Date).getFullYear()-1)),k=v(D,new Date),S=v(x,new Date),j=v(y,new Date),M=v(C,new Date),T=function(t){return"1M"==t?S:"3M"==t?j:"1Y"==t?M:k},Z={};w.forEach((function(t){Z[t]=T(t).map((function(t){return t.toLocaleDateString("en-US",{month:"numeric",day:"numeric",weekday:"short"})}))}));var I=function(t,n){var e=Array(t).flat();return("string"==typeof n?T(n):n).map((function(t){var n=t.toISOString().split("T")[0],a=e.map((function(t){return t[n]})).filter((function(t){return void 0!=t}));return a.length>0?{date:t,minutesStudied:a.map((function(t){return t.minutesStudied})).reduce((function(t,n){return t+n}),0)}:{date:t,minutesStudied:0}}))},F=function(t){var n={};return(0,l.c)(t).forEach((function(t){var e=new Date(t.Date),a=e.toISOString().split("T")[0];if(n[a]){var r=n[a].minutesStudied;n[a]={date:e,minutesStudied:parseFloat(t["Time (mins)"])+r}}else n[a]={date:e,minutesStudied:parseFloat(t["Time (mins)"])}})),n},L=function(t,n){if(t)try{var e=t.chart.data.datasets.at(n).data;return e.reduce((function(t,n){return t+n}),0)/e.length}catch(a){return}},O={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},annotation:{animation:!1,annotations:{averageTotal:{display:!1}}}},scales:{y:{title:{display:!0,text:"Study minutes"}}}},A=function(t){return(0,r.Z)((0,r.Z)({},O),{},{plugins:(0,r.Z)((0,r.Z)({},O.plugins),{},{annotation:(0,r.Z)((0,r.Z)({},O.plugins.annotation),{},{annotations:(0,r.Z)((0,r.Z)({},O.plugins.annotation.annotations),{},{averageTotal:{type:"line",scaleID:"y",value:function(n){var e;return null!==(e=L(n,t))&&void 0!==e?e:0},display:function(n){return!n.chart.legend.legendItems.at(t).hidden},label:{display:!0,content:function(n){var e;return"Avg: ".concat(null===(e=L(n,t))||void 0===e?void 0:e.toFixed(0)," mins/day")},backgroundColor:function(n){return n.chart.data.datasets.at(t).borderColor},color:function(n){return"#e5e5e5"==n.chart.data.datasets.at(t).borderColor?"#777":"#FFF"},backgroundShadowColor:"#b7b7b7",shadowOffsetX:3,shadowOffsetY:3,shadowBlur:4},borderColor:function(n){return n.chart.data.datasets.at(t).borderColor},borderDash:[6,6],borderWidth:3,drawTime:"afterDraw",shadowOffsetX:3,shadowOffsetY:3,shadowBlur:4,borderShadowColor:"#b7b7b7"}})})})})};function Y(){var t=(0,d.useContext)(f.u),n=t.jpdbData,e=t.jpdbIsLoading,r=(0,d.useContext)(p.F),o=r.bunproData,i=r.bunproIsLoading,l=(0,d.useContext)(m.b),v=l.ankiData,D=l.ankiDataIsLoading,x=(0,d.useContext)(b.o),y=x.immersionData,C=x.immersionIsLoading,k=(0,s.lr)(),S=(0,a.Z)(k,2),j=S[0],M=S[1],T=(0,d.useMemo)((function(){var t,n=null===(t=(0,c.Q)().get("dateRange"))||void 0===t?void 0:t.trim();return n&&w.includes(n)?n:w[0]}),[j]),L=(0,d.useState)(void 0),Y=(0,a.Z)(L,2),B=Y[0],R=Y[1],z=(0,d.useMemo)((function(){return void 0==B?O:A(B)}),[B]);(0,g.y1)("1",(function(){return R((function(t){return 0==t?void 0:0}))}),[]),(0,g.y1)("2",(function(){return R((function(t){return 1==t?void 0:1}))}),[]),(0,g.y1)("3",(function(){return R((function(t){return 2==t?void 0:2}))}),[]),(0,g.y1)("4",(function(){return R((function(t){return 3==t?void 0:3}))}),[]),(0,g.y1)("5",(function(){return R((function(t){return 4==t?void 0:4}))}),[]),(0,g.y1)("backspace",(function(){return R(void 0)}),[]);var E=(0,d.useMemo)((function(){return e||i||D||C||[n,o,v,y].includes(void 0)?{}:{jpdb:F(n),bunpro:F(o),anki:F(v),immersion:F(y)}}),[e,n,i,o,D,v,C,y]),P=(0,d.useMemo)((function(){return 0==Object.keys(E).length?{}:{labels:Z[T],datasets:[{label:"jpdb.io",data:I(E.jpdb,T).map((function(t){return t.minutesStudied})),borderColor:"#5dcc06",backgroundColor:"#5dcc06"},{label:"Bunpro",data:I(E.bunpro,T).map((function(t){return t.minutesStudied})),borderColor:"#ff9600",backgroundColor:"#ff9600"},{label:"Anki",data:I(E.anki,T).map((function(t){return t.minutesStudied})),borderColor:"#235390",backgroundColor:"#235390"},{label:"Immersion",data:I(E.immersion,T).map((function(t){return t.minutesStudied})),borderColor:"#cc348d",backgroundColor:"#cc348d"},{label:"Total",data:I([E.jpdb,E.bunpro,E.anki,E.immersion],T).map((function(t){return t.minutesStudied})),borderColor:"#e5e5e5",backgroundColor:"#e5e5e5"}]}}),[E,T]);return(0,h.jsxs)("div",{style:{maxHeight:"calc(100vh - 220px)",padding:"0 12px 12px 12px",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,h.jsx)("h1",{style:{margin:"4px 0 18px 0",padding:"0",fontSize:"28px",fontWeight:"600"},children:"Study Trends"}),(0,h.jsx)("div",{style:{display:"flex",marginBottom:"12px"},children:w.map((function(t,n){var e={backgroundColor:"#1baff6",borderColor:"#1a99d6",margin:"0 2px",padding:"5px 10px 3px 10px"};return T===t&&(e.backgroundColor="#ce82ff",e.borderColor="#a567cc"),(0,h.jsx)("button",{className:"button",style:e,onClick:function(){return M({dateRange:t})},children:t},n)}))}),null!==P&&void 0!==P&&P.datasets?(0,h.jsx)(u.x1,{options:z,data:P}):(0,h.jsx)("p",{style:{textAlign:"center"},children:"Loading..."})]})}},7221:function(t,n,e){e.d(n,{Q:function(){return a}});var a=function(){var t=window.location.toString().replace("/#/","/").replace("".concat(window.location.pathname,"#/"),"".concat(window.location.pathname,"/"));return new URL(t).searchParams}}}]);
//# sourceMappingURL=839.6e7ebd9b.chunk.js.map