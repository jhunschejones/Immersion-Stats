"use strict";(self.webpackChunkimmersion_stats=self.webpackChunkimmersion_stats||[]).push([[201],{1201:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var r=n(9439),s=n(2791),i=n(1087),a=n(184);function o(e){var t=e.radius,n=e.stroke,r=e.progress,s=e.title,i=e.progressText,o=void 0===i?null:i,c=r>100?100:r,l=t-2*n,d=2*l*Math.PI,u=d-c/100*d,g=100===c;return(0,a.jsxs)("div",{className:"progress-ring-container",style:{maxWidth:2*t,maxHeight:2*t+32},children:[(0,a.jsx)("h4",{className:"progress-title",children:s}),(0,a.jsx)("div",{className:"progress-ring","data-testid":"progress-ring",children:(0,a.jsx)("svg",{height:2*t,width:2*t,children:(0,a.jsx)("circle",{"data-full":g,stroke:g?"#5dcc06":"#235390",fill:"transparent",strokeWidth:n,strokeDasharray:d+" "+d,style:{strokeDashoffset:u},r:l,cx:t,cy:t})})}),(0,a.jsx)("span",{className:"progress-text","data-testid":"progress-text",children:o||"".concat(r,"%")})]})}var c=function(e){for(var t=e.toLowerCase().split(" "),n=0;n<t.length;n++)t[n]=t[n].charAt(0).toUpperCase()+t[n].slice(1);return t.join(" ")},l=n(7221),d=n(420),u=n(1355),g=[{name:"This week",key:"this-week"},{name:"Last week",key:"last-week"},{name:"Two weeks",key:"two-weeks"}];function h(){var e=(0,s.useContext)(d.R),t=e.aggregatedImmersionData,n=e.aggregatedImmersionIsLoading,h=(0,s.useState)({height:window.innerHeight,width:window.innerWidth}),m=(0,r.Z)(h,2),p=m[0],f=m[1],w=(0,i.lr)(),k=(0,r.Z)(w,2),x=k[0],v=k[1],y=(0,s.useMemo)((function(){var e,t=null===(e=(0,l.Q)().get("timeRange"))||void 0===e?void 0:e.trim();return t&&g.map((function(e){return e.key})).includes(t)?t:g[0].key}),[x]),j=(0,u.Z)(n,t),N=(0,s.useMemo)((function(){var e={};return g.forEach((function(t){e[t.key]=j.slice(0,3).map((function(e){return{progress:parseInt(e["".concat(c(t.name)," (mins)")])/parseInt(e["Weekly Goals (mins)"])*100,title:e.Category,progressText:e[c(t.name)]}}))})),e}),[j]);return(0,s.useEffect)((function(){var e=function(){f({height:window.innerHeight,width:window.innerWidth})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n?(0,a.jsx)("p",{className:"loading-messsage",children:"Fetching csv file..."}):0===Object.keys(N).length?(0,a.jsx)("p",{className:"loading-messsage",children:"Processing data..."}):(0,a.jsxs)("div",{className:"WeeklyProgress",children:[(0,a.jsx)("h1",{style:{margin:"4px 0 25px 0",padding:"0",fontSize:"28px",fontWeight:"600"},children:"Weekly Progress"}),(0,a.jsx)("div",{className:"time-range-button-container",children:g.map((function(e,t){var n="button time-range-button";return y===e.key&&(n+=" selected"),(0,a.jsx)("button",{className:n,onClick:function(){return v({timeRange:e.key})},children:e.name},t)}))}),(0,a.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:N[y].map((function(e,t){return(0,a.jsx)(o,{stroke:8,radius:p.width>419?85:75,progress:e.progress,title:e.title,progressText:e.progressText},t)}))})]})}},7221:function(e,t,n){n.d(t,{Q:function(){return r}});var r=function(){var e=window.location.toString().replace("/#/","/").replace("".concat(window.location.pathname,"#/"),"".concat(window.location.pathname,"/"));return new URL(e).searchParams}}}]);
//# sourceMappingURL=201.806ea779.chunk.js.map