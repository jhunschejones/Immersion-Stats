"use strict";(self.webpackChunkimmersion_stats=self.webpackChunkimmersion_stats||[]).push([[470],{2470:(e,s,t)=>{t.r(s),t.d(s,{default:()=>h});var r=t(5043),n=t(5475),i=t(579);function a(e){let{radius:s,stroke:t,progress:r,title:n,progressText:a=null}=e;const o=r>100?100:r,l=s-2*t,c=2*l*Math.PI,d=c-o/100*c,g=100===o;return(0,i.jsxs)("div",{className:"progress-ring-container",style:{maxWidth:2*s,maxHeight:2*s+32},children:[(0,i.jsx)("h4",{className:"progress-title",children:n}),(0,i.jsx)("div",{className:"progress-ring","data-testid":"progress-ring",children:(0,i.jsx)("svg",{height:2*s,width:2*s,children:(0,i.jsx)("circle",{"data-full":g,stroke:g?"#5dcc06":"#235390",fill:"transparent",strokeWidth:t,strokeDasharray:c+" "+c,style:{strokeDashoffset:d},r:l,cx:s,cy:s})})}),(0,i.jsx)("span",{className:"progress-text","data-testid":"progress-text",children:a||`${r}%`})]})}const o=e=>{let s=e.toLowerCase().split(" ");for(let t=0;t<s.length;t++)s[t]=s[t].charAt(0).toUpperCase()+s[t].slice(1);return s.join(" ")};var l=t(6386),c=t(3764),d=t(4989);const g=[{name:"This week",key:"this-week"},{name:"Last week",key:"last-week"},{name:"Two weeks",key:"two-weeks"}];function h(){const{aggregatedImmersionData:e,aggregatedImmersionIsLoading:s}=(0,r.useContext)(c.y),[t,h]=(0,r.useState)({height:window.innerHeight,width:window.innerWidth}),[m,p]=(0,n.ok)(),w=(0,r.useMemo)((()=>{var e;const s=null===(e=(0,l.j)().get("timeRange"))||void 0===e?void 0:e.trim();return s&&g.map((e=>e.key)).includes(s)?s:g[0].key}),[m]),u=(0,d.A)(s,e),k=(0,r.useMemo)((()=>{const e={};return g.forEach((s=>{e[s.key]=u.slice(0,3).map((e=>({progress:parseInt(e[`${o(s.name)} (mins)`])/parseInt(e["Weekly Goals (mins)"])*100,title:e.Category,progressText:e[o(s.name)]})))})),e}),[u]);return(0,r.useEffect)((()=>{const e=()=>{h({height:window.innerHeight,width:window.innerWidth})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),s?(0,i.jsx)("p",{className:"loading-messsage",children:"Fetching csv file..."}):0===Object.keys(k).length?(0,i.jsx)("p",{className:"loading-messsage",children:"Processing data..."}):(0,i.jsxs)("div",{className:"WeeklyProgress",children:[(0,i.jsx)("h1",{style:{margin:"4px 0 25px 0",padding:"0",fontSize:"28px",fontWeight:"600"},children:"Weekly Progress"}),(0,i.jsx)("div",{className:"time-range-button-container",children:g.map(((e,s)=>{let t="button time-range-button";return w===e.key&&(t+=" selected"),(0,i.jsx)("button",{className:t,onClick:()=>p({timeRange:e.key}),children:e.name},s)}))}),(0,i.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:k[w].map(((e,s)=>(0,i.jsx)(a,{stroke:8,radius:t.width>419?85:75,progress:e.progress,title:e.title,progressText:e.progressText},s)))})]})}},6386:(e,s,t)=>{t.d(s,{j:()=>r});const r=()=>{const e=window.location.toString().replace("/#/","/").replace(`${window.location.pathname}#/`,`${window.location.pathname}/`);return new URL(e).searchParams}}}]);
//# sourceMappingURL=470.50c0dc65.chunk.js.map