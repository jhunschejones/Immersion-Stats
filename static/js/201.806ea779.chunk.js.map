{"version":3,"file":"static/js/201.806ea779.chunk.js","mappings":"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","sources":["components/ProgressRing.js","utils/strings.js","components/WeeklyProgress.js","utils/urls.js"],"sourcesContent":["// Borrowed from https://css-tricks.com/building-progress-ring-quickly/\nimport PropTypes from \"prop-types\";\n\nProgressRing.propTypes = {\n  radius: PropTypes.number,\n  stroke: PropTypes.number,\n  progress: PropTypes.number,\n  title: PropTypes.string,\n  progressText: PropTypes.string\n};\n\nexport default function ProgressRing ({radius, stroke, progress, title, progressText=null}) {\n  const adjustedProgress = progress > 100 ? 100 : progress;\n  const normalizedRadius = radius - stroke * 2;\n  const circumference = normalizedRadius * 2 * Math.PI;\n  const strokeDashoffset = circumference - adjustedProgress / 100 * circumference;\n  const titleOffsetPixels = 32;\n  const showFullCircle = adjustedProgress === 100;\n\n  return (\n    <div\n      className=\"progress-ring-container\"\n      style={{maxWidth: radius * 2, maxHeight: (radius * 2) + titleOffsetPixels}}\n    >\n      <h4 className=\"progress-title\">{title}</h4>\n      <div className=\"progress-ring\" data-testid=\"progress-ring\">\n        <svg\n          height={radius * 2}\n          width={radius * 2}\n        >\n          <circle\n            data-full={showFullCircle}\n            stroke={showFullCircle ? \"#5dcc06\" : \"#235390\"}\n            fill=\"transparent\"\n            strokeWidth={stroke}\n            strokeDasharray={circumference + \" \" + circumference}\n            style={{strokeDashoffset}}\n            r={normalizedRadius}\n            cx={radius}\n            cy={radius}\n          />\n        </svg>\n      </div>\n      <span className=\"progress-text\" data-testid=\"progress-text\">\n        {progressText ? progressText : `${progress}%`}\n      </span>\n    </div>\n  );\n}\n","export const titleCase = (string) => {\n  let splitStringArray = string.toLowerCase().split(\" \");\n  for (let i = 0; i < splitStringArray.length; i++) {\n    splitStringArray[i] = splitStringArray[i].charAt(0).toUpperCase() + splitStringArray[i].slice(1);\n  }\n  return splitStringArray.join(\" \");\n};\n","import { useState, useMemo, useEffect, useContext } from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\nimport ProgressRing from \"./ProgressRing\";\nimport { titleCase } from \"../utils/strings\";\nimport { getSearchParams } from \"../utils/urls\";\nimport { AggregatedImmersionContext } from \"../providers/AggregatedImmersionProvider\";\nimport useParsedCsv from \"../hooks/use-parsed-csv\";\n\nconst TIME_RANGES = [\n  {name: \"This week\", key: \"this-week\"},\n  {name: \"Last week\", key: \"last-week\"},\n  {name: \"Two weeks\", key: \"two-weeks\"},\n];\n\nexport default function WeeklyProgress () {\n  const { aggregatedImmersionData: data, aggregatedImmersionIsLoading: isLoading } = useContext(AggregatedImmersionContext);\n  const [windowDimensions, setWindowDimensions] = useState({\n    height: window.innerHeight,\n    width: window.innerWidth\n  });\n\n  const [searchParams, setSearchParams] = useSearchParams();\n  const selectedTimeRangeKey = useMemo(() => {\n    const urlTimeRange = getSearchParams().get(\"timeRange\")?.trim();\n    if (urlTimeRange && TIME_RANGES.map(t => t.key).includes(urlTimeRange)) return urlTimeRange;\n    return TIME_RANGES[0].key;\n  }, [searchParams]);\n\n  const parsedCsvData = useParsedCsv(isLoading, data);\n\n  const progressByTimeRangeKey = useMemo(() => {\n    const result = {};\n    TIME_RANGES.forEach((timeRange) => {\n      result[timeRange.key] = parsedCsvData.slice(0, 3).map((progressReport) => {\n        const progressNumber = (parseInt(progressReport[`${titleCase(timeRange.name)} (mins)`]) / parseInt(progressReport[\"Weekly Goals (mins)\"])) * 100;\n        return {\n          progress: progressNumber,\n          title: progressReport[\"Category\"],\n          progressText: progressReport[titleCase(timeRange.name)],\n        };\n      });\n    });\n    return result;\n  }, [parsedCsvData]);\n\n  useEffect(() => {\n    const handleResize = () => {\n      setWindowDimensions({\n        height: window.innerHeight,\n        width: window.innerWidth\n      });\n    };\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  if (isLoading) {\n    return <p className=\"loading-messsage\">Fetching csv file...</p>;\n  }\n\n  if (Object.keys(progressByTimeRangeKey).length === 0) {\n    return <p className=\"loading-messsage\">Processing data...</p>;\n  }\n\n  return (\n    <div className=\"WeeklyProgress\">\n      <h1 style={{\n        margin: \"4px 0 25px 0\",\n        padding: \"0\",\n        fontSize: \"28px\",\n        fontWeight: \"600\"\n      }}>\n        Weekly Progress\n      </h1>\n      <div className=\"time-range-button-container\">\n        {TIME_RANGES.map((timeRange, index) => {\n          let buttonClassName = \"button time-range-button\";\n          if (selectedTimeRangeKey === timeRange.key) {\n            buttonClassName += \" selected\";\n          }\n          return (\n            <button\n              key={index}\n              className={buttonClassName}\n              onClick={() => setSearchParams({timeRange: timeRange.key})}\n            >\n              {timeRange.name}\n            </button>\n          );\n        })}\n      </div>\n      <div style={{display: \"flex\", flexWrap: \"wrap\", justifyContent: \"center\"}}>\n        {progressByTimeRangeKey[selectedTimeRangeKey].map((progressReport, index) => {\n          return <ProgressRing\n            key={index}\n            stroke={8}\n            radius={windowDimensions.width > 419 ? 85 : 75}\n            progress={progressReport[\"progress\"]}\n            title={progressReport[\"title\"]}\n            progressText={progressReport[\"progressText\"]}\n          />;\n        })}\n      </div>\n    </div>\n  );\n}\n","/** the getter on react-dom's `useSearchParams` hook doesn't work with the hash\n * router, so use this function instead to read search params from the URL\n*/\nexport const getSearchParams = () => {\n  const cleanLocationString = window.location\n    .toString()\n    .replace(\"/#/\", \"/\")\n    .replace(`${window.location.pathname}#/`, `${window.location.pathname}/`);\n  return new URL(cleanLocationString).searchParams;\n};\n"],"names":["ProgressRing","radius","stroke","progress","title","progressText","adjustedProgress","normalizedRadius","circumference","Math","PI","strokeDashoffset","showFullCircle","className","style","maxWidth","maxHeight","height","width","fill","strokeWidth","strokeDasharray","r","cx","cy","titleCase","string","splitStringArray","toLowerCase","split","i","length","charAt","toUpperCase","slice","join","TIME_RANGES","name","key","WeeklyProgress","useContext","AggregatedImmersionContext","data","aggregatedImmersionData","isLoading","aggregatedImmersionIsLoading","useState","window","innerHeight","innerWidth","windowDimensions","setWindowDimensions","useSearchParams","searchParams","setSearchParams","selectedTimeRangeKey","useMemo","urlTimeRange","getSearchParams","get","trim","map","t","includes","parsedCsvData","useParsedCsv","progressByTimeRangeKey","result","forEach","timeRange","progressReport","parseInt","useEffect","handleResize","addEventListener","removeEventListener","Object","keys","margin","padding","fontSize","fontWeight","index","buttonClassName","onClick","display","flexWrap","justifyContent","cleanLocationString","location","toString","replace","pathname","URL"],"sourceRoot":""}